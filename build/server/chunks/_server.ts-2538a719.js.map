{"version":3,"file":"_server.ts-2538a719.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/solve/_server.ts.js"],"sourcesContent":["import { j as json } from \"../../../../chunks/index2.js\";\nimport * as MiniZinc from \"minizinc\";\nconst POST = async ({ request }) => {\n  var _a, _b;\n  const m = new MiniZinc.Model();\n  const topics = [];\n  const min_pages = [];\n  const max_pages = [];\n  const lectors = [];\n  const body = await request.json();\n  body.topics.map((topic) => {\n    topics.push(topic.topic);\n    min_pages.push(topic.minPages);\n    max_pages.push(topic.maxPages);\n    lectors.push(topic.numPotentialReaders);\n  });\n  const model = `\n    int: n;\n    int: paginas;\n    \n    array[1..n] of int: pagMin;\n    array[1..n] of int: pagMax;\n    array[1..n] of int: lectores;\n    \n    array[1..n] of var int: datos;\n    \n    constraint forall(i in 1..n) (datos[i] >= 0 \\\\/ datos[i] >= pagMin[i]);\n    constraint forall(j in 1..n) (datos[j] <= pagMax[j]);\n    constraint sum(k in 1..n) (datos[k]) <= paginas;\n    solve maximize sum(l in 1..n) (datos[l] * lectores[l]);\n    output [\"{%datos%:\", show(datos), \", %lectores%:\", show(sum(l in 1..n) (datos[l] * lectores[l])), \"}\"]\n    `;\n  const data = `\n        n = ${topics.length};\n        paginas = ${body.total_paginas};\n        pagMin = [${min_pages}];\n        pagMax = [${max_pages}];\n        lectores = [${lectors}];\n    `;\n  m.addString(model);\n  m.addDznString(data);\n  const result = await m.solve({\n    options: {\n      solver: \"Chuffed\",\n      \"all-solutions\": true\n    }\n  });\n  const solution = (_b = (_a = result.solution) == null ? void 0 : _a.output.raw) == null ? void 0 : _b.replaceAll(\"%\", '\"');\n  return json(JSON.parse(solution));\n};\nexport {\n  POST\n};\n"],"names":[],"mappings":";;;AAEK,MAAC,IAAI,GAAG,OAAO,EAAE,OAAO,EAAE,KAAK;AACpC,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC;AACb,EAAE,MAAM,CAAC,GAAG,IAAI,QAAQ,CAAC,KAAK,EAAE,CAAC;AACjC,EAAE,MAAM,MAAM,GAAG,EAAE,CAAC;AACpB,EAAE,MAAM,SAAS,GAAG,EAAE,CAAC;AACvB,EAAE,MAAM,SAAS,GAAG,EAAE,CAAC;AACvB,EAAE,MAAM,OAAO,GAAG,EAAE,CAAC;AACrB,EAAE,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE,CAAC;AACpC,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,KAAK;AAC7B,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;AAC7B,IAAI,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AACnC,IAAI,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AACnC,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;AAC5C,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,KAAK,GAAG,CAAC;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,CAAC;AACN,EAAE,MAAM,IAAI,GAAG,CAAC;AAChB,YAAY,EAAE,MAAM,CAAC,MAAM,CAAC;AAC5B,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC;AACvC,kBAAkB,EAAE,SAAS,CAAC;AAC9B,kBAAkB,EAAE,SAAS,CAAC;AAC9B,oBAAoB,EAAE,OAAO,CAAC;AAC9B,IAAI,CAAC,CAAC;AACN,EAAE,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;AACrB,EAAE,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;AACvB,EAAE,MAAM,MAAM,GAAG,MAAM,CAAC,CAAC,KAAK,CAAC;AAC/B,IAAI,OAAO,EAAE;AACb,MAAM,MAAM,EAAE,SAAS;AACvB,MAAM,eAAe,EAAE,IAAI;AAC3B,KAAK;AACL,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,QAAQ,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,MAAM,CAAC,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AAC7H,EAAE,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;AACpC;;;;"}